<!--pages/index/index.wxml-->
<view class="container">
  <!-- 搜索栏 -->
  <view class="search-bar">
    <view class="search-input">
      <image class="search-icon" src="/images/icon_search.png" mode="aspectFit"></image>
      <input
        type="text"
        placeholder="搜索研学产品"
        value="{{keyword}}"
        bindinput="onSearchInput"
        bindconfirm="onSearch"
      />
    </view>
  </view>

  <!-- 轮播图 -->
  <view class="banner">
    <swiper
      indicator-dots="{{true}}"
      autoplay="{{true}}"
      interval="{{3000}}"
      duration="{{500}}"
      circular="{{true}}"
    >
      <swiper-item wx:for="{{banners}}" wx:key="id">
        <image class="banner-image" src="{{item.imageUrl}}" mode="aspectFill"></image>
      </swiper-item>
    </swiper>
  </view>

  <!-- 快捷入口 -->
  <view class="quick-nav">
    <view class="nav-item" bindtap="goToCategory" data-category="1">
      <image class="nav-icon" src="/images/icon_category_1.png" mode="aspectFit"></image>
      <text class="nav-text">户外探索</text>
    </view>
    <view class="nav-item" bindtap="goToCategory" data-category="2">
      <image class="nav-icon" src="/images/icon_category_2.png" mode="aspectFit"></image>
      <text class="nav-text">科技体验</text>
    </view>
    <view class="nav-item" bindtap="goToCategory" data-category="3">
      <image class="nav-icon" src="/images/icon_category_3.png" mode="aspectFit"></image>
      <text class="nav-text">文化研学</text>
    </view>
    <view class="nav-item" bindtap="goToCategory" data-category="4">
      <image class="nav-icon" src="/images/icon_category_4.png" mode="aspectFit"></image>
      <text class="nav-text">自然教育</text>
    </view>
  </view>

  <!-- 热门推荐 -->
  <view class="section">
    <view class="section-header">
      <text class="section-title">热门推荐</text>
      <text class="section-more" bindtap="goToProducts">更多 ›</text>
    </view>
    <view class="product-list">
      <view
        class="product-item"
        wx:for="{{hotProducts}}"
        wx:key="id"
        bindtap="goToProduct"
        data-id="{{item.id}}"
      >
        <image class="product-image" src="{{item.coverImage}}" mode="aspectFill"></image>
        <view class="product-info">
          <text class="product-title">{{item.title}}</text>
          <view class="product-tags">
            <text class="tag tag-primary" wx:if="{{item.stock > 0}}">有货</text>
            <text class="tag tag-danger" wx:else>售罄</text>
          </view>
          <view class="product-footer">
            <text class="product-price">¥{{item.price}}</text>
            <text class="product-sales">已售{{item.salesCount || 0}}</text>
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- 最新上架 -->
  <view class="section">
    <view class="section-header">
      <text class="section-title">最新上架</text>
      <text class="section-more" bindtap="goToProducts">更多 ›</text>
    </view>
    <view class="product-list">
      <view
        class="product-item"
        wx:for="{{newProducts}}"
        wx:key="id"
        bindtap="goToProduct"
        data-id="{{item.id}}"
      >
        <image class="product-image" src="{{item.coverImage}}" mode="aspectFill"></image>
        <view class="product-info">
          <text class="product-title">{{item.title}}</text>
          <view class="product-footer">
            <text class="product-price">¥{{item.price}}</text>
            <text class="product-sales">已售{{item.salesCount || 0}}</text>
          </view>
        </view>
      </view>
    </view>
  </view>
</view>
